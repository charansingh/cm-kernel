***************
*** 537,550 ****
  	.owner = THIS_MODULE,
  	.open = akmd_open,
  	.release = akmd_release,
- 	.ioctl = akmd_ioctl,
  };
  
  static const struct file_operations akm_aot_fops = {
  	.owner = THIS_MODULE,
  	.open = akm_aot_open,
  	.release = akm_aot_release,
- 	.ioctl = akm_aot_ioctl,
  };
  
  static struct miscdevice akm_aot_device = {
--- 537,550 ----
  	.owner = THIS_MODULE,
  	.open = akmd_open,
  	.release = akmd_release,
+ 	.compat_ioctl = akmd_ioctl,
  };
  
  static const struct file_operations akm_aot_fops = {
  	.owner = THIS_MODULE,
  	.open = akm_aot_open,
  	.release = akm_aot_release,
+ 	.compat_ioctl = akm_aot_ioctl,
  };
  
  static struct miscdevice akm_aot_device = {
